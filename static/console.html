<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7" ng-app="console"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8" ng-app="console"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9" ng-app="console"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" ng-app="console"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">

        <link rel="stylesheet" href="/static/css/bootstrap.min.css">
        <link rel="stylesheet" href="/static/css/bootstrap-responsive.min.css">
        <link rel="stylesheet" href="/static/css/bootstrap-editable.css">
        <link rel="stylesheet" href="/static/css/angular-ui.min.css">
        <link rel="stylesheet" href="/static/css/main.css">

        <script src="/static/js/vendor/modernizr-2.6.2-respond-1.1.0.min.js"></script>
    </head>
    <body>

      <div class="modal fade hide" tw-modal="true" id="addAppModal" ng-controller="AddAppCtrl">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">x</button>
          <h3>Create new App</h3>
        </div>
        <form method="post" action='' name="login_form" ng-submit="saveApp(user)" >
          <div class="modal-body">

            <p><input type="text" required="required" class="span3" ng-model="model.app_name" placeholder="Name your App"></p>
          </div>
          <div class="modal-footer">
            <button type="submit" class="btn btn-primary">Add App</button>
          </div>
        </form>
      </div>

      <div class="modal fade hide" tw-modal="true" id="addProfileModal" ng-controller="AddProfileCtrl">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">x</button>
          <h3>Create new Profile</h3>
        </div>
        <form method="post" action='' name="login_form" ng-submit="saveProfile(user)" >
          <div class="modal-body">
            <p>for {{appState.selected_app.name}}</p>
            <p><input type="text" required="required" class="span3" ng-model="name" placeholder="Name this Profile"></p>
          </div>
          <div class="modal-footer">
            <button type="submit" class="btn btn-primary">Add Profile</button>
          </div>
        </form>
      </div>

      <div class="modal fade hide" tw-modal="true" id="addRestrictionModal" ng-controller="AddRestrictionCtrl">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">x</button>
          <h3>Add Restriction</h3>
        </div>
        <form method="post" action='' name="login_form" ng-submit="saveRestriction()" >
          <div class="modal-body">

            <p><label>Action:</label><input type="text" required="required" class="span3" ng-model="params.action" placeholder="Action name">
              <select ng-model="params.class_">
                <option value="">Select </option>
                <option value="BinaryRestriction">Binary allow/disallow</option>
                <option value="PerTimeResctriction">Times During Period</option>
                <option value="AccountRestriction">Account Amount</option>
                <option value="TotalAmountRestriction">Total Amount</option>
              </select>
            </p>
            <p ui-if="params.class_=='BinaryRestriction'">
              <button class="span3" ng-click="params.allow=false; return false;">
                <span ui-if="params.allowed">Access Denied</span>
                <span ui-if="!params.allowed">Access Granted</span>
              </button>
            </p>
            <p ui-if="params.class_=='PerTimeResctriction'">
              limit to <input type="number" class="span1" ng-model="params.limit_to" placeholder="x" /> times per
              <select ng-model="params.duration">
                <option value="1">second </option>
                <option value="60">minute</option>
                <option value="1800">half an hour</option>
                <option value="3600">hour</option>
                <option value="7200">2 hours</option>
                <option value="14400">4 hours</option>
                <option value="28800">8 hours</option>
                <option value="43200">12 hours</option>
                <option value="86400">24 hours</option>
                <option value="86401">day</option>
                <option value="172800">2 days</option> 
                <option value="432000">5 days</option> 
                <option value="604800">7 days</option> 
                <option value="604801">week</option>  
                <option value="1209600">2 weeks</option> 
                <option value="2419200">4 weeks</option> 
                <option value="30758401">year</option> 
              </select>
            </p>
            <p ui-if="params.class_=='AccountRestriction'">
              <label>Name of value in account:</label>
              <input type="text" required="required" ng-model="params.account_item">
            </p>
            <p ui-if="params.class_=='TotalAmountRestriction'">
              <label>Total Maximum</label>
              <input type="number" ng-model="params.total_max">
            </p>
          </div>
          <div class="modal-footer">
            <button type="submit" class="btn btn-primary">Add Restriction</button>
          </div>
        </form>
      </div>

      <div id="navbar" ng-controller="NavbarCtrl" class="navbar">
        <div class="navbar-inner">
          <div class="container">
            <ul class="nav" id="main-nav">
              <li class="dropdown">
                <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                  {{appState.selected_app.name}}&nbsp;<span class="caret"></span>
                </a>
                <ul class="dropdown-menu">
                  <li ng-repeat="app in appState.apps"><a href="#/{{app.key}}/dashboard">{{app.name}}</a></li>
                  <li class="divider"></li>
                  <li><a data-toggle="modal" href="#addAppModal" ><i class="icon-plus"></i> Add App</a></li>
                </ul>
              </li>
              <li class="active"><a href="#/{{appState.selected_app.key}}/dashboard">Dashboard</a></li>
              <li><a href="#/{{appState.selected_app.key}}/stats">Statistics</a></li>
              <li><a href="#/{{appState.selected_app.key}}/devices"><i class="icon-print icon-white"></i> Devices</a></li>
              <li><a href="#/{{appState.selected_app.key}}/users"><i class="icon-user icon-white"></i> Users</a></li>
              <li><a href="#/{{appState.selected_app.key}}/logs"><i class="icon-th-list icon-white"></i> Raw Logs</a></li>             
              <li class="dropdown">
                <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                  <span class="icon-cog icon-white"></span>&nbsp;<span class="caret"></span>
                </a>
                <ul class="dropdown-menu">
                  <li class="dropdown-submenu pull-left">
                    <a tabindex="-1" href="#"><i class="icon-home"></i> Profiles</a>
                      <ul class="dropdown-menu">
                        <li ng-repeat="profile in appState.profiles"><a ng-href="#/{{appState.selected_app.key}}/profiles/{{profile.id}}">{{profile.name}}</a></li>
                        <li class="divider"></li>
                        <li><a data-toggle="modal" href="#addProfileModal" ><i class="icon-plus"></i> Add Profile</a></li>
                          </ul>
                  </li>
                  <li>
                    <a href="#/{{appState.selected_app.key}}/details"><i class="icon-cog"></i> Settings</a>
                  </li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
      </div>

        <div id="generalModal" class="modal hide fade" tabindex="-1" role="dialog">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
            <h3>Modal header</h3>
          </div>
          <div class="content-wrapper">
          </div>
        </div>

        <div class="container">
            <div id="main" ng-view>
            </div>

            <hr>

            <footer>
                <p>&copy; Nothing 2012</p>
            </footer>

        </div> <!-- /container -->
        <script src="/static/js/vendor/jquery-1.8.3.min.js"></script>

        <script src="/static/js/vendor/bootstrap.min.js"></script>
        <!--
        <script src="/static/js/vendor/underscore-min.js"></script>
        <script src="/static/js/vendor/json2.js"></script>
        <script src="/static/js/vendor/backbone-min.js"></script>
        <script src="/static/js/vendor/base64.js"></script>
        -->
        <script src="/static/js/vendor/angular.min.js"></script>
        <script src="/static/js/vendor/angular-resource.min.js"></script>
        <script src="/static/js/vendor/angular-ui.min.js"></script>
        <script src="/static/js/vendor/bootstrap-editable-inline.min.js"></script>

        <script src="/static/js/console.js"></script>

        <script>
            var _gaq=[['_setAccount','UA-XXXXX-X'],['_trackPageview']];
            (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
            g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
            s.parentNode.insertBefore(g,s)}(document,'script'));
        </script>
    </body>
</html>
